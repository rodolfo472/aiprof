<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>AI Prof</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: #0f172a;
  color: white;
}
.hidden { display: none; }

header {
  background: #020617;
  padding: 15px;
  text-align: center;
  font-size: 22px;
  font-weight: bold;
}

.container {
  padding: 15px;
}

input, button {
  padding: 10px;
  margin: 5px 0;
  width: 100%;
  border-radius: 8px;
  border: none;
  font-size: 16px;
}

button {
  background: #22c55e;
  cursor: pointer;
}

#chat {
  height: 220px;
  background: #020617;
  border-radius: 8px;
  padding: 10px;
  overflow-y: auto;
  margin-bottom: 10px;
}

.msg { margin-bottom: 8px; }
.user { color: #60a5fa; }
.system { color: #22c55e; }

.panel {
  display: flex;
  gap: 10px;
  margin-bottom: 10px;
}

.panel div {
  flex: 1;
  background: #020617;
  padding: 10px;
  border-radius: 8px;
  text-align: center;
}

canvas {
  margin-top: 10px;
  background: #000;
  border-radius: 10px;
}
</style>
</head>

<body>

<header>ğŸ® AI Prof</header>

<div class="container" id="auth">
  <h3>Login</h3>
  <input id="name" placeholder="Nome">
  <input id="pass" type="password" placeholder="Senha">
  <button onclick="login()">Entrar</button>
</div>

<div class="container hidden" id="game">

  <div class="panel">
    <div>ğŸ’° Moedas<br><span id="coinsEl">0</span></div>
    <div>ğŸ† NÃ­vel<br><span id="rankEl">1</span></div>
  </div>

  <div id="chat"></div>

  <input id="msg" placeholder="Digite sua mensagem">
  <button onclick="send()">Enviar</button>

  <hr>

  <button onclick="buyPrize()">ğŸ Comprar PrÃªmio (100.000 moedas)</button>
  <button onclick="logout()">ğŸšª Sair</button>

  <hr>

  <h3>ğŸ–¼ Criador de Imagens</h3>
  <input id="imgText" placeholder="Ex: imagem de fogo">
  <button onclick="criarImagem()">Criar Imagem</button>
  <button onclick="baixarImagem()">Baixar Imagem</button>

  <canvas id="canvas" width="300" height="300"></canvas>

</div>

<script>
let user = null;
let coins = 0;

// LOGIN
function login() {
  const name = document.getElementById("name").value;
  const pass = document.getElementById("pass").value;
  if (!name || !pass) return alert("Preencha tudo");

  user = name;
  localStorage.setItem("usuario_logado", user);

  coins = Number(localStorage.getItem("coins_" + user)) || 0;

  auth.classList.add("hidden");
  game.classList.remove("hidden");

  systemMsg("Bem-vindo, " + user + "!");
  update();
}

// LOGIN AUTOMÃTICO
window.onload = function () {
  const salvo = localStorage.getItem("usuario_logado");
  if (salvo) {
    user = salvo;
    coins = Number(localStorage.getItem("coins_" + user)) || 0;
    auth.classList.add("hidden");
    game.classList.remove("hidden");
    systemMsg("Bem-vindo de volta, " + user + "!");
    update();
  }
};

// LOGOUT
function logout() {
  localStorage.removeItem("usuario_logado");
  location.reload();
}

// CHAT
function send() {
  const text = msg.value.trim();
  if (!text) return;
  chatMsg(user + ": " + text, "user");
  msg.value = "";
  setTimeout(() => responderSistema(text), 400);
}

function chatMsg(text, cls) {
  const div = document.createElement("div");
  div.className = "msg " + cls;
  div.innerText = text;
  chat.appendChild(div);
  chat.scrollTop = chat.scrollHeight;
}

function systemMsg(text) {
  chatMsg("AI Prof: " + text, "system");
}

// RESPOSTAS
function responderSistema(p) {
  p = p.toLowerCase();
  let r = "Posso responder horas, datas, Brasil e matemÃ¡tica.";

  if (p.includes("hora")) r = "Agora sÃ£o " + new Date().toLocaleTimeString("pt-BR");
  else if (p.includes("data") || p.includes("dia")) r = "Hoje Ã© " + new Date().toLocaleDateString("pt-BR");
  else if (p.includes("capital do brasil")) r = "A capital do Brasil Ã© BrasÃ­lia.";
  else if (p.includes("brasil")) r = "O Brasil foi descoberto em 1500.";
  else if (/[0-9]/.test(p) && /[\+\-\*\/]/.test(p)) {
    try { r = "Resultado: " + eval(p.replace(/[^0-9+\-*/.]/g,"")); }
    catch { r = "Erro no cÃ¡lculo."; }
  }

  systemMsg(r);
}

// MOEDAS
setInterval(() => {
  if (user) {
    coins++;
    update();
  }
}, 1000);

function update() {
  coinsEl.innerText = coins;
  rankEl.innerText = Math.max(1, Math.floor(coins / 1000));
  localStorage.setItem("coins_" + user, coins);
}

function buyPrize() {
  if (coins >= 100000) {
    coins -= 100000;
    systemMsg("ğŸ‰ PrÃªmio comprado!");
    update();
  } else systemMsg("âŒ Moedas insuficientes.");
}

// CRIADOR DE IMAGEM ESTILO 3D
function criarImagem() {
  const t = imgText.value.toLowerCase();
  const ctx = canvas.getContext("2d");
  ctx.clearRect(0,0,300,300);

  const grad = ctx.createRadialGradient(150,120,20,150,150,200);

  if (t.includes("fogo")) {
    grad.addColorStop(0,"#ffcc00");
    grad.addColorStop(0.4,"#ff3300");
    grad.addColorStop(1,"#330000");
    ctx.fillStyle = grad;
    ctx.fillRect(0,0,300,300);
    for(let i=0;i<120;i++){
      ctx.beginPath();
      ctx.arc(150+(Math.random()-0.5)*120,220-Math.random()*140,10+Math.random()*25,0,Math.PI*2);
      ctx.fillStyle=`rgba(255,${100+Math.random()*155},0,0.8)`;
      ctx.fill();
    }
  } 
  else if (t.includes("agua") || t.includes("Ã¡gua")) {
    grad.addColorStop(0,"#66ccff");
    grad.addColorStop(1,"#001f4d");
    ctx.fillStyle = grad;
    ctx.fillRect(0,0,300,300);
    for(let y=0;y<300;y+=15){
      ctx.beginPath();
      ctx.moveTo(0,y);
      for(let x=0;x<=300;x+=15){
        ctx.lineTo(x,y+Math.sin(x*0.05+y*0.1)*6);
      }
      ctx.strokeStyle="rgba(255,255,255,0.25)";
      ctx.stroke();
    }
  } 
  else if (t.includes("ceu") || t.includes("cÃ©u")) {
    grad.addColorStop(0,"#aee6ff");
    grad.addColorStop(1,"#1e90ff");
    ctx.fillStyle = grad;
    ctx.fillRect(0,0,300,300);
    for(let i=0;i<8;i++){
      ctx.beginPath();
      ctx.arc(60+i*30,80+Math.sin(i)*10,35,0,Math.PI*2);
      ctx.fillStyle="rgba(255,255,255,0.95)";
      ctx.fill();
    }
  } 
  else if (t.includes("espaco") || t.includes("espaÃ§o")) {
    grad.addColorStop(0,"#222244");
    grad.addColorStop(1,"#000000");
    ctx.fillStyle = grad;
    ctx.fillRect(0,0,300,300);
    for(let i=0;i<150;i++){
      ctx.beginPath();
      ctx.arc(Math.random()*300,Math.random()*300,Math.random()*2,0,Math.PI*2);
      ctx.fillStyle="white";
      ctx.fill();
    }
  } 
  else {
    grad.addColorStop(0,"#444");
    grad.addColorStop(1,"#111");
    ctx.fillStyle = grad;
    ctx.fillRect(0,0,300,300);
  }

  systemMsg("Imagem criada ğŸ¨");
}

function baixarImagem() {
  const link = document.createElement("a");
  link.download = "imagem_ai_prof.png";
  link.href = canvas.toDataURL();
  link.click();
}
</script>

</body>
</html>
